#!/bin/bash

SCRIPT_ABSOLUTE_FILE_PATH="$(cd "$(dirname "$BASH_SOURCE")"; pwd)/$(basename "$BASH_SOURCE")"
SCRIPT_FILE_NAME="${SCRIPT_ABSOLUTE_FILE_PATH##*/}"
SCRIPT_ABSOLUTE_PATH="${SCRIPT_ABSOLUTE_FILE_PATH//\/$SCRIPT_FILE_NAME/}"
. "${SCRIPT_ABSOLUTE_PATH}/load_env.sh"
SCRIPT_ABSOLUTE_PATH="${SCRIPT_ABSOLUTE_FILE_PATH//\/$SCRIPT_FILE_NAME/}"

CYPRESS_EXECUTABLE="$(npm bin)/cypress"

echo "$CYPRESS_ORTHANC_URL"
echo "$CYPRESS_ORTHANC_NAME"
echo "$CYPRESS_MONGO_URL"
echo "$CYPRESS_MONGO_DUMP_PATH"
echo "$CYPRESS_MONGO_INITIAL_DB"
echo "$CYPRESS_MONGO_SNAPSHOTS_PATH"
echo "$CYPRESS_ROOT_URL"
echo "$CYPRESS_TRAVIS_BUILD_DIR"
cd "$LESION_TRACKER_PATH" || exit 1
echo -e "${INVERT_BOLD}Cypress${INVERT_BOLD_RE}: ${BLUE}starting${DEFAULT_COLOR}"
$CYPRESS_EXECUTABLE open
